\tableofcontents

\newpage

\section{Question 1}

Figure \ref{fig1} shown below has errors/typos.
Identify the errors and explain them.
Describe how the program design should have been to maximize the degree of encapsulation.

\begin{figure}
\centering
	\begin{tikzpicture}
		\begin{class}[text width=5cm]{Employee}{0, 0}
			\attribute{- yearsOfService: float}
			\attribute{- lastName: String}
			\attribute{- firstName: String}
			\attribute{- socSecNum: String}
			\attribute{- employeeID: String}
			\operation{...}
		\end{class}
	\end{tikzpicture}
\caption{UML Diagram for Question 1}\label{fig1}
\end{figure}

\lstset{language=java, tabsize=4}
\begin{lstlisting}[caption=]
public class Employee {
	public static void main(String[] args) {
		private float yearsOfService;
		public String lastName;
		public String firstName;
		public String socSecNum;
		public String employeeID;
		// ...
	}
}
\end{lstlisting}

\subsection*{Solution}

The given code snippet is inconsistent with its corresponding UML diagram depicted in Figure \ref{fig1}.
Even though all attributes are shown as private, they have been assigned \texttt{public} modifiers in the corresponding code snippet.
In addition, attributes such as \texttt{socSecNum} and \texttt{employeeID} are declared with \texttt{String} data type whereas it makes more sense to declare them as \texttt{int}.
Figure \ref{fig2} provides a revised version of the UML diagram in which a few possible methods have been included.

\begin{figure}
\centering
	\begin{tikzpicture}
		\begin{class}[text width=5cm]{Employee}{0, 0}
			\attribute{- yearsOfService: float}
			\attribute{- lastName: String}
			\attribute{- firstName: String}
			\attribute{- socSecNum: int}
			\attribute{- employeeID: int}
			\operation{+ getYears(): float}
			\operation{+ getName: String}
			\operation{+ getSecNum(): int}
			\operation{+ getId(): int}
			\operation{...}
		\end{class}
	\end{tikzpicture}
\caption{Revised UML Diagram for Figure \ref{fig1}}\label{fig2}
\end{figure}

Java source code is also slightly modified to conform the revised UML diagram.

\begin{lstlisting}
public class Employee {
	public static void main(String[] args) {
		private float yearsOfService;
		private String lastName;
		private String firstName;
		private int socSecNum;
		private int employeeID;
		// ...
	}
}
\end{lstlisting}

\section{Question 2}

The following code snippet is syntactically correct.

\begin{darkListing}
ArrayList<Student> al = new ArrayList<Student>();
al.add(new OutStateStudent(2000));
System.out.println(al.get(0).getTuition());
\end{darkListing}

However, the code snippet given below has compilation errors and cannot be executed.

\begin{darkListing}
ArrayList al = new ArrayList();
al.add(new OutStateStudent(2000));
System.out.println(al.get(0).getTuition());
\end{darkListing}

Identify and resolve the compilation error in latter code snippet.

\subsection*{Solution}

Since Java v1.5 and introduction of Generics, the \texttt{ArrayList} class accepts a generic type \texttt{<E>}.
To maintain backward compatibility, explicit type declartion for classes that accept generics is not required.

Declaring the type of objects to be given to the \texttt{ArrayList}, as is done in the first code snippet, will necessitate compile-time type checking which may initially be regarded as an additional restriction.
The advantage, however, is that compiler will \textit{understand} the type of objects the \texttt{ArrayList} is holding.
As a result, all calls to methods defined for declared data type will thereafter be validated.
This justifies why the method \texttt{getTuition()} in third statement of the first code snippet is acknowledged and validated by the compiler.

As for the second code snippet, since the type of objects passed to \texttt{ArrayList} is not declared, the \texttt{ArrayList} will be regarded merely as container of \texttt{Objects}.
Therefore, even if a subclass of \texttt{Student} is passes to the \texttt{ArrayList}, the compiler will treat all elements as \texttt{Objects} and none of the methods defined for \texttt{Student} will be recognized.

A possible workaround to fix the compilation error caused due to illegal call to \texttt{getTuition()} is explicit type casting from \texttt{Object} to \texttt{Student} as is shown in the code below.

\begin{lstlisting}
import java.util.ArrayList;
public class StudentTest {
	public static void main(String[] args) {
		ArrayList al = new ArrayList();
		al.add(new Student("Pejman"));
		Student student = (Student) al.get(0);
		System.out.println(student.getName());
	}
}
\end{lstlisting}

Where Student class is simply defined as follows.

\begin{lstlisting}
public class Student {
	private String name;
	public Student(String name) {
		this.name = name;
	}
	public String getName() {
		return this.name;
	}
}
\end{lstlisting}

However such type casting is dangerous and the proposed workaround is not recommended.

\section{Question 3}

Figure \ref{fig3} shows the relationship between Polygon interface and three classes implementing it.
Develop the interface \texttt{Polygon} and its two implementation claseses \texttt{Triangle} and \texttt{Rectangle}.
Implement \texttt{getPoints()} and \texttt{getArea()} in the two subclasses.

In the main method, write test code that makes two different triangles and two different rectangles.
Include the four polygons in a collection (e.g. \texttt{ArrayList}) using generics.
Print out area for each polygon using an iterator.
Keep the encapsulation principle in mind: All data fields must be declared \textit{private} and no mutator is required.

\begin{figure}
\centering
	\begin{tikzpicture}
		\begin{interface}[text width=7cm]{Polygon}{0,0}
			\operation{+ getPoints(): ArrayList$<$Point$>$}
			\operation[0]{+ getArea(): double}
		\end{interface}
		\begin{class}[text width=4cm]{Triangle}{-5,-4}
			\implement{Polygon}
			\operation{+ getArea(): double}
		\end{class}
		\begin{class}[text width=4cm]{Rectangle}{0,-4}
			\implement{Polygon}
			\operation{+ getArea(): double}
		\end{class}
		\begin{class}[text width=4cm]{Pentagon}{5,-4}
			\implement{Polygon}
			\operation{+ getArea(): double}
		\end{class}
	\end{tikzpicture}
\caption{UML Diagram for Question 3}\label{fig3}
\end{figure}

\subsection*{Solution}

\begin{enumerate}
	\item Class \texttt{Polygon}
	\lstinputlisting{\srcDirectory/main/java/hw01/Polygon.java}
	\item Class \texttt{Triangle}
	\lstinputlisting{\srcDirectory/main/java/hw01/Triangle.java}
	\item Class \texttt{Rectangle}
	\lstinputlisting{\srcDirectory/main/java/hw01/Rectangle.java}
	\item Class \texttt{PolygonMain}
	\lstinputlisting{\srcDirectory/main/java/hw01/PolygonMain.java}
\end{enumerate}

Source code for unit tests related to this question are provided in Appendix \ref{App:AppendixA}.

\section{Question 4}

\newpage
\appendix

\section{Unit Tests for Question 3}\label{App:AppendixA}

\begin{enumerate}
	\item Class \texttt{TriangleTest}
	\lstinputlisting{\srcDirectory/test/java/hw01/TriangleTest.java}
	\item Class \texttt{RectangleTest}
	\lstinputlisting{\srcDirectory/test/java/hw01/RectangleTest.java}
\end{enumerate}

\begin{appendix}
	\listoffigures
	\listoftables
\end{appendix}
